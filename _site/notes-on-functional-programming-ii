<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notes on Functional Programming II: Composition &amp; Point-free Style || Chrysanthium</title>
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/post.css">
    <link rel="stylesheet" href="/css/tomorrow.css">
  </head>

  <body>
    <header class="navigation">
      <ul>
        <li>
          <a href="/">Blog</a>
        </li>

        <li>
          <a href="/about">About</a>
        </li>
      </ul>
    </header>

    <h1>Notes on Functional Programming II: Composition &amp; Point-free Style</h1>
    
      <h6>2017/02</h6>
    

    <h2>Composition</h2>
<p><strong>Composition</strong> is the idea of breaking a complex concept down to atoms and then combine them to pipe values through a series of functions.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">compose</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">g<span class="token punctuation">,</span> h</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token function">h</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<p>This compose function takes two functions <code>g</code> and <code>h</code> and will return an anonymous function which accepts one argument <code>x</code>. If we call the returned function with an argument, it will first apply the argument to the last function <code>x' = h(x)</code> and the respective return value <code>x'</code> as an argument to the first function <code>x'' = g(x')</code>.</p>
<p>It's basically chaining functions from inside out where each return value becomes the argument for the next function. So instead of adding cognitive complexity by going step by step, we encapsulate them and go the whole path at once:</p>
<p><img src="images/composition.png" alt="composition"></p>
<p>Here's a more general version which accepts a number of functions and arguments:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">compose</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> <span class="token operator">...</span>fns</span><span class="token punctuation">)</span> <span class="token operator">=></span>
  fns<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token function-variable function">fn</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token function">compose</span><span class="token punctuation">(</span><span class="token operator">...</span>fns<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<h3>Advantages of composition?</h3>
<p><strong>Composition can create a complex data flow consisting of simple atoms</strong></p>
<p>Let's look at an example of determine the price of a product and assume the following available functions:</p>
<pre><code>getProduct, getPrice, applyDiscount, applyTax, applyShipping
</code></pre>
<p>We can combine them in several ways:</p>
<pre><code>getProductPrice = compose(
    getProduct,
    getPrice
)

getProductPriceForRetail = compose(
    getProductPrice,
    applyTax,
    applyShipping
)

getProductPriceForWholesale = compose(
    getProductPrice,
    applyShipping
)

getProductPriceForRetailWithDiscount = compose(
    getProductPriceForRetail,
    applyDiscount
)
</code></pre>
<p>Because data flows from one pure function to another this creates a program which:</p>
<ol>
<li>is easy to reason about</li>
<li>consists of atomic operations which can be easily refactored</li>
<li>can be used to build complex systems from simple atoms</li>
</ol>
<h2>Point-free</h2>
<p>In the previous example we have composed a function in <strong>tacit style</strong> since we didn't mention it's arguments even once.</p>
<blockquote>
<p><strong>Point-free functions</strong> do not identify the arguments on which they operate.</p>
</blockquote>
<h3>Advantages of point-free style</h3>
<p><strong>Point-free functions don't need to name their arguments</strong></p>
<p>One of the hardest things in programming is to find an adequate and relatively persistent name which you don't have to if you never mention the arguments.</p>
<p><strong>Point-free functions are concise and generic</strong></p>
<p>It removes unnecessary information of an argument getting passed around which is not your main point of interest. Your interest should lie in the transformations applied which are in sequence easier to understand. Therefore they reduce syntactic noise and strengthen the expressiveness by focusing on the composition itself.</p>
<h2>Links</h2>
<ul>
<li><a href="/notes-on-functional-programming-i">Notes on Functional Programming I: First-class, Pure, Curried Functions</a></li>
<li><a href="/notes-on-functional-programming-iii">Notes on Functional Programming III: Functor, Applicative &amp; Monad</a></li>
</ul>


    <footer class="navigation">
      <ul>
        <li>
          <a href="/privacy">Privacy</a>
        </li>

        <li>
          <a href="/legal">Legal</a>
        </li>
      </ul>
    </footer>
  </body>
</html>

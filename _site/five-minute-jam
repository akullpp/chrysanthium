<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Five Minute JAM || Chrysanthium</title>
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/post.css">
    <link rel="stylesheet" href="/css/tomorrow.css">
  </head>

  <body>
    <header class="navigation">
      <ul>
        <li>
          <a href="/">Blog</a>
        </li>

        <li>
          <a href="/about">About</a>
        </li>
      </ul>
    </header>

    <h1>Five Minute JAM</h1>
    
      <h6>2019/02</h6>
    

    <p>The <a href="https://jamstack.org">JAM stack</a> is one of the hottest topics in web development right now and you just cannot get around it because it is so convenient and going to dominate in 2019 when it comes to websites or content management systems. The acronym stands for:</p>
<ul>
<li><strong>J</strong>avascript on the client-side</li>
<li><strong>A</strong>PIs that are reusable</li>
<li><strong>M</strong>arkup which is prebuilt</li>
</ul>
<blockquote>
<p>Compared traditional stacks we delegate complex technologies and focus on the content and how it is displayed.</p>
</blockquote>
<p>This means we often use a headless CMS as a service like <a href="https://www.contentful.com">Contentful</a> to focus on the structure of our domain or provide a lightweight interface like <a href="https://www.netlifycms.org">Netlify CMS</a> and have our content in Git. No matter how you get your content, you will not have DevOps overhead.</p>
<p>Although the definition does not include specific technologies, we will look at an extremely fitting pair - <strong>Netlify</strong> &amp; <strong>Gatsby</strong> - to run a basic website. We will do this from the very scratch without any starters since they often do not provide the quality desired and to prove that you can have a running MVP in less than five minutes.</p>
<p>This will be a very detailed step by step tutorial, so if you are interested in the solution, you can find the final page <a href="https://friendly-williams-3154af.netlify.com">hosted on Netlify</a> and the <a href="https://github.com/akullpp/gatsby-demo">code on GitHub</a>.</p>
<p>After the positive experience with Gatsby and Netlify, I decided to migrate this website and blog. The code can be found <a href="https://github.com/akullpp/chrysanthium">on GitHub</a> and shows a complete example of a productive system.</p>
<h2>Netlify</h2>
<p>To say that <a href="https://www.netlify.com">Netlify</a> is a hosting platform is an understatement. Not only did they coin the term <strong>JAM</strong> but their service is probably the best thing that happened for web development since GitHub and far better than GitHub Pages. For me it rivals the awesomeness of <a href="https://zeit.co/now">Zeit's Now</a> and is one reason I would say that you only need your own backend systems if it is a legal obligation.</p>
<p>Unfortunately, I am not sponsored by Netlify but stunned by their great free tier and features which include...</p>
<ul>
<li>Atomic branch deploys with snapshots, rollbacks and notifications</li>
<li>Automatic domain, subdomains and custom domains</li>
<li>CDN with cache invalidation</li>
<li>SSL from Let's Encrypt</li>
<li>Redirects, rewrites and proxy rules</li>
<li>Custom header control</li>
<li>AWS Lambda functions</li>
<li>Identity management</li>
<li>Form management</li>
<li>A/B, multi-variant or split testing</li>
</ul>
<h2>Gatsby</h2>
<p>The second player in our game is <a href="https://www.gatsbyjs.org/">Gatsby</a>, a static site generator - similar to Jekyll but built from scratch with modern technologies - written on top of React which generates HTML by applying content to templates. Its conventions are suitable for small projects, especially blogs. However it becomes really cumbersome if you want to do fancy stuff or work against its conventions, so do not try to be too smart.</p>
<p>If you have a large-scale or highly individuals projects with a few hundred or even thousands of pages, you should look at <a href="https://nextjs.org/">Next.js</a>. It also does server-side rendering and therefore scales better because you do not need to rebuild on every change.</p>
<p>Out of the box it features advanced progressive web technologies like offline access, prefetching an caching which makes faster than traditional generators. The best feature however is the modern development environment since you can transfer your React knowledge and have the same feedback loop.</p>
<h2>Getting started</h2>
<p>Let us assume that you created a new project with <code>npm init</code>, you will need to install the following dependencies:</p>
<pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> i <span class="token parameter variable">-S</span> gatsby gatsby-source-filesystem gatsby-transformer-remark react react-dom</code></pre>
<h3>Configuring Gatsby</h3>
<p>Create the Gatsby configuration file <code>gatsby-config.js</code> in your root directory with the following content:</p>
<pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">siteMetadata</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"Doe's corner"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token string">'John Doe'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token string">'gatsby-source-filesystem'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'pages'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">permalink</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>__dirname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/src/pages</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'gatsby-transformer-remark'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre>
<p>The first plugin <code>gatsby-source-filesystem</code> gets the markdown files from the <code>pages</code> folder and the second plugin <code>gatsby-transformer-remark</code> transforms them to HTML.</p>
<h3>Setting up the markdown</h3>
<pre><code>src/
  pages/
    blog/
      2019-01-01---first-post/
        index.md
      2019-01-02---second-post/
        index.md
      2019-01-01---third-post/
        index.md
</code></pre>
<blockquote>
<p>First lesson: Keep your content grouped together</p>
</blockquote>
<p>Everything what is part of a post goes into the same folder and you want your folder structure to match the site structure as closely as possible. Do not try to be too fancy. You could of course infer some metadata but this will soon become a mess. Do not use the default structure by Gatsby since it only leads to a higher maintenance cost.</p>
<p>Regarding the content of the markdown files I just want to give one small example which you can adapt accordingly:</p>
<pre class="language-markdown"><code class="language-markdown"><span class="token front-matter-block"><span class="token punctuation">---</span>
<span class="token front-matter yaml language-yaml"><span class="token key atrule">title</span><span class="token punctuation">:</span> First Post
<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2019-01-01</span>

<span class="token key atrule">permalink</span><span class="token punctuation">:</span> /first<span class="token punctuation">-</span>post</span>
<span class="token punctuation">---</span></span>

This is the <span class="token bold"><span class="token punctuation">**</span><span class="token content">first</span><span class="token punctuation">**</span></span> post.</code></pre>
<blockquote>
<p>Second lesson: Keep metadata close to the content.</p>
</blockquote>
<p>Otherwise you will need to create code that is specific to the framework and you will have a hard time migrating your stuff. Take for example the path metadata, you will always know the original URL under which the post was published and therefore do not have to change internal links.</p>
<h3>Creating a template</h3>
<p>We provide <code>src/templates/post.js</code> which will be used for each markdown file in the <code>src/pages/blog</code> folder:</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> graphql <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'gatsby'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">markdownRemark</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      html<span class="token punctuation">,</span>
      <span class="token literal-property property">frontmatter</span><span class="token operator">:</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> date <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>date<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">dangerouslySetInnerHTML</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">__html</span><span class="token operator">:</span> html <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> postQuery <span class="token operator">=</span> graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  query PostQuery($permalink: String!) {
    markdownRemark(frontmatter: { permalink: { eq: $path } }) {
      html
      frontmatter {
        title
        date(formatString: "DD.MM.YYYY")
      }
    }
  }
</span><span class="token template-punctuation string">`</span></span></code></pre>
<p>The only interesting thing that happens here, is that the exported <a href="https://graphql.org/learn/">GraphQL</a> query automatically populates the component function with the fetched data. Although the destructuring might look scary, the default export is just a plain functional component that wraps the data in blocks and headlines.</p>
<p>The GraphQL schema gets generated by Gatsby automatically and can be queried with <a href="https://github.com/graphql/graphiql">GraphiQL</a> which is available under <code>/___graphql</code>.</p>
<h3>Generating views</h3>
<p>The instructions required to create the views from our markdown files are created by implementing Gatsby's <code>createPages</code> API inside <code>gatsby-node.js</code> at the root:</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

exports<span class="token punctuation">.</span><span class="token function-variable function">createPages</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span> createPage <span class="token punctuation">}</span><span class="token punctuation">,</span> graphql <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span>
  <span class="token function">graphql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    {
      allMarkdownRemark(limit: 1000) {
        edges {
          node {
            html
            frontmatter {
              category
              path
            }
          }
        }
      }
    }
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">allMarkdownRemark</span><span class="token operator">:</span> <span class="token punctuation">{</span> edges <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span>
      edges<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token punctuation">{</span> frontmatter <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span>
        <span class="token function">createPage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">permalink</span><span class="token operator">:</span> frontmatter<span class="token punctuation">.</span>path<span class="token punctuation">,</span>
          <span class="token literal-property property">component</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">src/templates/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>frontmatter<span class="token punctuation">.</span>category<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span></code></pre>
<p>The <code>category</code> field in our markdown determines which template we are going to use in order to be more flexible. You can also enrich the nodes by implementing <code>onCreateNode</code> but this often does lead to very specific code which we do not want because it would violate our second lesson learnt.</p>
<h3>Creating the final pages</h3>
<p>In general Gatsby is full of automagical conventions and if you create a <code>js</code> file in the <code>pages</code> folder, it will be included as a view with a specific route, e.g. a <code>pages/404.js</code> will be accessible under <code>/404</code>, <code>/404.html</code> and used for every unknown route:</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">Page not found</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span></code></pre>
<p>For our <code>/blog</code> route we want to create a simple listing of all posts sorted by date descending. According to the module pattern we create an <code>index.js</code> file in <code>src/pages/blog</code> where we will only select markdown files in the <code>post</code> category:</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link<span class="token punctuation">,</span> graphql <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'gatsby'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">allMarkdownRemark</span><span class="token operator">:</span> <span class="token punctuation">{</span> edges <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">Post</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>edges<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
          <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">frontmatter</span><span class="token operator">:</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> date<span class="token punctuation">,</span> path <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>path<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>path<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
              </span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token plain-text"> (</span><span class="token punctuation">{</span>date<span class="token punctuation">}</span><span class="token plain-text">)
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> blogQuery <span class="token operator">=</span> graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  query BlogQuery {
    allMarkdownRemark(
      filter: { frontmatter: { category: { eq: "post" } } }
      sort: { fields: [frontmatter___date], order: DESC }
    ) {
      edges {
        node {
          frontmatter {
            title
            date(formatString: "DD.MM.YYYY")
            category
            path
          }
        }
      }
    }
  }
</span><span class="token template-punctuation string">`</span></span></code></pre>
<p>Let us keep the landing page simple and display the site metadata from <code>gatsby-config.js</code>. We will provide a link to an about page yet to be created and our blog overview:</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link<span class="token punctuation">,</span> graphql <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'gatsby'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">site</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">siteMetadata</span><span class="token operator">:</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> author <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
      Hello, welcome to </span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token plain-text"> by </span><span class="token punctuation">{</span>author<span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">

    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/blog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">Blog</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/about<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">About</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> rootQuery <span class="token operator">=</span> graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  query rootQuery {
    site {
      siteMetadata {
        title
        author
      }
    }
  }
</span><span class="token template-punctuation string">`</span></span></code></pre>
<p>Since the about page is mainly content, we also create a markdown file for it, i.e. <code>src/about/index.md</code>:</p>
<pre class="language-markdown"><code class="language-markdown"><span class="token front-matter-block"><span class="token punctuation">---</span>
<span class="token front-matter yaml language-yaml"><span class="token key atrule">title</span><span class="token punctuation">:</span> About
<span class="token key atrule">category</span><span class="token punctuation">:</span> page
<span class="token key atrule">permalink</span><span class="token punctuation">:</span> /about</span>
<span class="token punctuation">---</span></span>

I am a software developer.</code></pre>
<p>As you can see, it uses a separate template for demonstration purposes which resides in <code>src/templates/page.js</code> and is quite similar to the post template:</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> graphql <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'gatsby'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">markdownRemark</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      html<span class="token punctuation">,</span>
      <span class="token literal-property property">frontmatter</span><span class="token operator">:</span> <span class="token punctuation">{</span> title <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">dangerouslySetInnerHTML</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">__html</span><span class="token operator">:</span> html <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> pageQuery <span class="token operator">=</span> graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  query PageQuery($permalink: String!) {
    markdownRemark(frontmatter: { permalink: { eq: $path } }) {
      html
      frontmatter {
        title
      }
    }
  }
</span><span class="token template-punctuation string">`</span></span></code></pre>
<p>If you followed the steps, you will have the following structure:</p>
<pre><code>src/
  pages/
    about/
      index.md
    blog/
      2019-01-01---first-post/
        index.md
      2019-01-02---second-post/
        index.md
      2019-01-03---third-post/
        index.md
      index.js
    404.js
    index.js
  templates/
    page.js
    post.js
gatsby-config.js
gatsby-node.js
package.json
</code></pre>
<p>If you are coming from a CMS with frontend, you are probably missing the UI for your users to create posts. There is Netlify CMS but it is not ready yet for serious usage because it does not integrate well with a sensible Gatsby setup right now. However there are a lot of really good markdown editors which can be integrated quite well.</p>


    <footer class="navigation">
      <ul>
        <li>
          <a href="/privacy">Privacy</a>
        </li>

        <li>
          <a href="/legal">Legal</a>
        </li>
      </ul>
    </footer>
  </body>
</html>
